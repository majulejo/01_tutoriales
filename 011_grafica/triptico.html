<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tr√≠ptico de Pacientes</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }
      body {
        font-family: "Poppins", sans-serif;
        background: #f7f9fc;
      }
      header,
      .acciones {
        text-align: center;
        padding: 1em;
      }
      .navegacion-boxes,
      .navegacion-hojas {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
        margin-bottom: 20px;
      }
      .navegacion-boxes button,
      .navegacion-hojas button {
        padding: 10px 15px;
        border: none;
        background-color: #007bff;
        color: white;
        border-radius: 6px;
        cursor: pointer;
      }
      .navegacion-boxes button.active,
      .navegacion-hojas button.active {
        background-color: #0056b3;
      }
      .pagina {
        display: none;
        padding: 20px;
      }
      .pagina.active {
        display: block;
      }
      #info-box {
        text-align: center;
        font-size: 1.2em;
        margin-bottom: 15px;
        color: #333;
      }
      #boton-borrar {
        display: block;
        margin: 10px auto;
        padding: 8px 16px;
        background-color: #dc3545;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Gesti√≥n de Evoluci√≥n de Pacientes</h1>
    </header>

    <div class="navegacion-boxes">
      <script>
        document.write(
          [...Array(12)]
            .map(
              (_, i) =>
                `<button onclick="seleccionarBox(${i + 1})" id="box-btn-${
                  i + 1
                }">Box ${i + 1}</button>`
            )
            .join("")
        );
      </script>
    </div>

    <div id="info-box">Rellenando informaci√≥n del Box 1</div>
    <button id="boton-borrar" onclick="borrarDatos()">
      üóëÔ∏è Borrar datos de este Box
    </button>

    <div class="navegacion-hojas">
      <button onclick="mostrarHoja(1)" id="hoja-btn-1">Hoja 1</button>
      <button onclick="mostrarHoja(2)" id="hoja-btn-2">Hoja 2</button>
      <button onclick="mostrarHoja(3)" id="hoja-btn-3">Hoja 3</button>
    </div>

    <div id="pagina1" class="pagina active">
      <h2>Hoja 1 - Datos Cl√≠nicos</h2>
      <label for="campo1">Presi√≥n:</label>
      <input type="text" id="campo1" />
      <br /><br />
      <button onclick="guardarDatos()">Guardar Datos</button>
      <button onclick="window.print()">Imprimir Hoja 1</button>
    </div>

    <div id="pagina2" class="pagina">
      <h2>Hoja 2 - Historia Cl√≠nica</h2>
      <label for="campo2">Edad:</label>
      <input type="text" id="campo2" />
      <br /><br />
      <button onclick="guardarDatos()">Guardar Datos</button>
      <button onclick="window.print()">Imprimir Hoja 2</button>
    </div>

    <div id="pagina3" class="pagina">
      <h2>Hoja 3 - Tel√©fonos y Alergias</h2>
      <label for="campo3">Tel√©fono:</label>
      <input type="text" id="campo3" />
      <br /><br />
      <button onclick="guardarDatos()">Guardar Datos</button>
      <button onclick="window.print()">Imprimir Hoja 3</button>
    </div>

    <script>
      let boxActual = 1;

      function seleccionarBox(num) {
        boxActual = num;
        document
          .querySelectorAll(".navegacion-boxes button")
          .forEach((btn) => btn.classList.remove("active"));
        document.getElementById(`box-btn-${num}`).classList.add("active");
        document.getElementById(
          "info-box"
        ).textContent = `Rellenando informaci√≥n del Box ${num}`;
        cargarDatos();
      }

      function mostrarHoja(num) {
        document
          .querySelectorAll(".pagina")
          .forEach((p) => p.classList.remove("active"));
        document.getElementById(`pagina${num}`).classList.add("active");
        document
          .querySelectorAll(".navegacion-hojas button")
          .forEach((b) => b.classList.remove("active"));
        document.getElementById(`hoja-btn-${num}`).classList.add("active");
      }

      function guardarDatos() {
        const datos = {
          campo1: document.getElementById("campo1").value,
          campo2: document.getElementById("campo2").value,
          campo3: document.getElementById("campo3").value,
        };
        localStorage.setItem(`box${boxActual}_fijo`, JSON.stringify(datos));
        alert("Datos guardados para Box " + boxActual);
      }

      function cargarDatos() {
        const clave = `box${boxActual}_fijo`;
        const datos = JSON.parse(localStorage.getItem(clave)) || {};
        document.getElementById("campo1").value = datos.campo1 || "";
        document.getElementById("campo2").value = datos.campo2 || "";
        document.getElementById("campo3").value = datos.campo3 || "";
      }

      function borrarDatos() {
        const clave = `box${boxActual}_fijo`;
        if (
          confirm(
            "¬øSeguro que quieres borrar los datos del Box " + boxActual + "?"
          )
        ) {
          localStorage.removeItem(clave);
          cargarDatos();
          alert("Datos borrados.");
        }
      }

      seleccionarBox(1);
      mostrarHoja(1);
    </script>
  </body>
</html>
